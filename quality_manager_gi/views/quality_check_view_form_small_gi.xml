<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

          <record id="quality_point_gi_form_small" model="ir.ui.view">
            <field name="name">quality_check_form_gi</field>
            <field name="model">quality.check</field>
            <field name="inherit_id" ref="quality.quality_check_view_form_small"/>
            <field name="arch" type="xml">

                <xpath expr="//group[1]" position="after">
                    <group>
                        <field name="move_line_ids" colspan="2" nolabel="1" required="1">

                                <tree string="Datos de calidad" delete="false" open="false" create="false" editable="bottom">
                                    <field name="product_id" readonly="1"/>
                                    <field name="lot_id" required="1" readonly="1" domain="[('product_id', '=', product_id)]" context="{'default_product_id': product_id}"/>
                                    <field name="life_date" required="1"/>
                                    <field name="date_analysis" required="1"/>
                                    <field name="doc_number" required="1"/>
                                     <field name="num_container" required="1"/>
                                    <field name="employee_id" required="1"/>
                                    <field name="valuation" required="1"/>
                                    <field name="unit_valuation" attrs="{'required':[('valuation','!=',0)]}"/>
                                    <field name="approved_lot" groups="quality.group_quality_manager"/>
                                </tree>
                        </field>   
                    </group>
                </xpath>
                

                <xpath expr="//button[@name='do_pass']" position="replace">
                    <button name="do_pass_gi" type="object" class="btn-primary" string="Aprobado" attrs="{'invisible': [('test_type', 'in', ['measure','control_gi', 'control_2_gi'])]}"/>
                </xpath>

                <xpath expr="//button[@name='do_fail']" position="replace">
                    <button name="do_fail_gi" type="object" class="btn-primary" string="Rechazada" attrs="{'invisible': [('test_type', 'in', ['measure','control_gi', 'control_2_gi'])]}"/>
                </xpath>

                <xpath expr="//button[@name='do_fail_gi']" position="after">
                    <button name="create_quality_check" type="object" class="btn-primary" string="Crear controles" attrs="{'invisible': [('test_type', '!=', 'control_gi')]}"/>
                </xpath>

                <xpath expr="//button[@name='do_fail_gi']" position="after">
                    <button name="generate_quality_checks" type="object" class="btn-primary" string="Verificar controles" attrs="{'invisible': [('test_type', '!=', 'control_2_gi')]}"/>
                </xpath>
                
            </field>
        </record>


    </data>
</odoo>
