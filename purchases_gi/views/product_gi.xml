<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>

        <!-- PRODUCT GI VIEWS -->

        <record model="ir.ui.view" id="product_form_gi_puchases">
            <field name="name">product_form_gi_puchases</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">

                <xpath expr="//notebook/page[4]" position="attributes">
                    <attribute name="string">Control</attribute>
                </xpath>

                <xpath expr="//field[@name='categ_id']" position="attributes">
                    <attribute name="options">{'no_create_edit': True}</attribute>
                    <attribute name="widget">selection</attribute>
                </xpath>

                <xpath expr="//field[@name='purchase_ok']" position="attributes">
                    <attribute name="groups">purchases_gi.group_assistant,purchase.group_purchase_manager</attribute>
                </xpath>

              <!--   <xpath expr="//field[@name='saller_ids']" position="attributes">
                    <attribute name="groups">purchases_gi.group_assistant,purchase.group_purchase_manager</attribute>
                </xpath> -->

                <xpath expr="//page[@name='variants']" position="replace">
                    <page name="variants" string="Variants">
                        <field name="attribute_line_ids" widget="one2many_list" readonly="0">
                            <tree string="Variants" editable="true" create="true" delete="true">
                                <field name="attribute_id" readonly="0"/>
                                <field name="value_ids" widget="many2many_tags" options="{'no_create_edit': True}" domain="[('attribute_id', '=', attribute_id)]" context="{'default_attribute_id': attribute_id}" readonly="0"/>
                            </tree>

                            <form string="Variants" editable="true" create="true" delete="true">
                                <field name="attribute_id" readonly="0"/>
                                <field name="value_ids" widget="many2many_tags" options="{'no_create_edit': True}" domain="[('attribute_id', '=', attribute_id)]" context="{'default_attribute_id': attribute_id}" readonly="0"/>
                            </form>

                        </field>
                            <p class="oe_grey">
                            <strong>Advertencia</strong>: 
                            agregar o eliminar atributos eliminará y volverá a crear las variantes existentes y provocará la pérdida de sus posibles personalizaciones.
                        </p>
                    </page>
                </xpath>

                <xpath expr="//page[2]" position="attributes">
                    <attribute name="string">Variantes</attribute>
                </xpath>


                <xpath expr="//page[1]" position="after">
                    <page string="Compras" attrs="{'invisible':[('purchase_ok','=',False)]}">
                        <page>
                            <group>
                                <group>
                                    <!-- <field name='classification'/> -->
                                    <!-- <field name='presentation'/> -->
                                    <field name='type_of_provenance' attrs="{'required':[('purchase_ok','=',True)]}"/>
                                    <field name='foreign_exchange' attrs="{'required':[('purchase_ok','=',True)]}"/>
                                    <!-- <field name='average_cost'/> -->
                                    <field name='average_variation_pur' groups="purchase.group_purchase_manager"/>
                                    <!-- <field name='iva'/> -->
                                    <!-- <field name='is_restricted'/> -->
                                    <field name='inputs_for_manufacturing'/>
                                    <field name="import_license" domain="[('is_linked', '=', False)]"/>
                                </group>

                                <group>
                                    <!-- <field name='reviewed'/> -->
                                    <field name='maquila'/>
                                    <!-- <field name='has_expiration'/> -->
                                    <!-- <field name='antibiotic'/> -->
                                    <!-- <field name='minimum_rating'/>
                                    <field name='max_rating'/> -->
                                    <!-- <field name='date_to_consider'/>
                                    <field name='consider_valuation'/> -->
                                </group>
                            </group>

                            <!-- <group>
                                <field name="warehouse"/>
                                <field name="warehouse" attrs="{'required':[('purchase_ok','=',True)]}"/>
                            </group> -->
                        </page>
                    </page>
                </xpath> 

                <xpath expr="//field[@name='list_price']" position="attributes">
                    <attribute name="attrs">{'invisible':[('purchase_ok','=', True),('sale_ok','=', False)]}</attribute>
                </xpath>

            </field>
        </record>

    </data>
</openerp>
