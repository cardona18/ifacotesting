<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

    <record model="ir.ui.menu" id="purchase_requisition.menu_purchase_requisition_pro_mgt">
         <field name="name">Solicitudes de compra</field>
    </record>

    <!--
     _____                     _                                                 
    |  __ \                   | |
    | |  \/ ___ _ __ ___ _ __ | |_ ___    ___ ___  _ __ ___  _ __  _ __ __ _ ___
    | | __ / _ \ '__/ _ \ '_ \| __/ _ \  / __/ _ \| '_ ` _ \| '_ \| '__/ _` / __|
    | |_\ \  __/ | |  __/ | | | ||  __/ | (_| (_) | | | | | | |_) | | | (_| \__ \
     \____/\___|_|  \___|_| |_|\__\___|  \___\___/|_| |_| |_| .__/|_|  \__,_|___/
                                                            | |                  
                                                            |_|                  
    -->

    <record id="manager_purchases" model="res.groups">
            <field name="name">Gerente compras</field>
            <field name="category_id" ref="base.module_category_purchase_management"/>
            <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
            <field name="comment">El usuario tendrá todos los privilegios de el responsable de compras.</field>
    </record>


    <!--
       ___       __           _                                                
      |_  |     / _|         | |                                               
        | | ___| |_ ___    __| | ___    ___ ___  _ __ ___  _ __  _ __ __ _ ___ 
        | |/ _ \  _/ _ \  / _` |/ _ \  / __/ _ \| '_ ` _ \| '_ \| '__/ _` / __|
    /\__/ /  __/ ||  __/ | (_| |  __/ | (_| (_) | | | | | | |_) | | | (_| \__ \
    \____/ \___|_| \___|  \__,_|\___|  \___\___/|_| |_| |_| .__/|_|  \__,_|___/
                                                          | |                  
                                                          |_|                  
    -->

    <record id="purchase.group_purchase_manager" model="res.groups">
        <field name="name">Jefe de compras</field>
        <field name="implied_ids" eval="[(4, ref('purchases_gi.group_assistant'))]"/>
    </record>

    <record id="recruitment_all_base_user_rule" model="ir.rule">
        <field name="name">Ver todas las solicitudes de compra</field>
        <field ref="model_purchase_requisition" name="model_id"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
    </record>

    <record id="purchase.group_purchase_manager" model="res.groups">
        <field name="menu_access" eval="[(4, ref('purchase.menu_purchase_rfq')),
        (4, ref('purchase.menu_purchase_form_action')),
        (4, ref('purchase.menu_product_in_config_purchase')),
        (4, ref('account.menu_action_invoice_tree2')),
        (4, ref('purchase_reception_menu')),
        (4, ref('purchase.menu_procurement_partner_contact_form'))]"/>
        <!-- <field name="menu_access" eval="[(4, ref('purchase.menu_purchase_rfq')), (4, ref('purchase.menu_purchase_form_action')), (4, ref('purchase.menu_procurement_management_invoice')), (4, ref('purchase.menu_procurement_management_product')), (4, ref('stock.menu_product_by_category_stock_form')), (4, ref('purchase.menu_product_by_category_purchase_form')), (4, ref('purchase.menu_procurement_partner_contact_form')),(4, ref('base.menu_purchase_root')),(4,ref('purchase.menu_product_in_config_purchase')),(4,ref('purchase.menu_purchase_partner_cat'))]"/> -->
    </record>


<!--    
purchase.menu_purchase_partner_cat
 <record id="purchase.group_purchase_manager" model="res.groups">
        <field name="menu_access" eval="[(4, ref('purchase.menu_product_by_category_purchase_form'))]"/>,
        (4,ref('purchase.menu_purchase_config_purchase'))
        ,(3,ref('purchase.menu_product_pricelist_action2_purchase'))
    </record>
 -->
<!--     <record id="purchase.group_purchase_manager" model="res.groups">
        <field name="menu_access" eval="[(4, ref('base.menu_procurement_management_supplier_name'))]"/>
    </record> -->
<!-- 
    <record id="purchase.group_purchase_manager" model="res.groups">
        <field name="menu_access" eval="[(4, ref('purchase.menu_procurement_management_invoice'))]"/>
    </record> -->
<!-- 
    <record id="purchase.group_purchase_manager" model="res.groups">
        <field name="menu_access" eval="[(4, ref('purchase.menu_procurement_management_product'))]"/>
    </record>
 -->
    <record id="rule_group_manager_order" model="ir.rule">
        <field name="name">No ver cotizaciones en borrador de los auxiliares</field>
         <field name="model_id" ref="model_purchase_order"/>
        <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
        <field name="domain_force">[('state','in',('purchase','sent','bid','cancel','approve','or_purchase_create','approved', 'confirmed','done','draft'))]</field>
    </record>


    <!--
    ______                         _              
    | ___ \                       (_)          
    | |_/ /___  ___ ___ _ __   ___ _  _'_  _ __  
    |    // _ \/ __/ _ \ '_ \ / __| |/ _ \| '_ \
    | |\ \  __/ (_|  __/ |_) | (__| | (_) | | | |
    \_| \_\___|\___\___| .__/ \___|_|\___/|_| |_|
                       | |                       
                       |_|     
    -->                                 

    <record id="group_receptionist_pro" model="res.groups">
        <field name="name">Recepción de almacenables</field>
        <field name="category_id" ref="base.module_category_purchase_management"/>
        <field name="menu_access" eval="[(4, ref('purchase.menu_purchase_form_action'))]"/>
    </record> 

    <record id="group_receptionist_con_ser" model="res.groups">
        <field name="name">Recepción de consum - servicios</field>
        <field name="category_id" ref="base.module_category_purchase_management"/>
        <field name="menu_access" eval="[(4, ref('purchase.menu_purchase_form_action')),
        (4, ref('account.menu_action_invoice_tree2')),
        (4, ref('purchase_reception_menu'))]"/>
    </record>


<!--     <record model="ir.model" id="purchase.model_purchase_order">
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="perm_create" eval="False"/>
    </record>
 -->
        <record id="receptionist_all_requisition" model="ir.rule">
        <field name="name">Ver todas las solicitudes de compra, recepcionistas</field>
            <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field ref="model_purchase_requisition" name="model_id"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('purchases_gi.group_receptionist_pro')),
        (4, ref('purchases_gi.group_receptionist_con_ser'))]"/>
    </record>

    <record model="res.groups" id="purchase.group_purchase_user">
        <field name="model_access" eval="[(5,ref('purchase.model_purchase_order'))]"/>
    </record>

    <!--
               _ _      _ _             _       _                                                
              | (_)    (_) |           | |     | |                                               
     ___  ___ | |_  ___ _| |_ _   _  __| |   __| | ___    ___ ___  _ __ ___  _ __  _ __ __ _ ___ 
    / __|/ _ \| | |/ __| | __| | | |/ _` |  / _` |/ _ \  / __/ _ \| '_ ` _ \| '_ \| '__/ _` / __|
    \__ \ (_) | | | (__| | |_| |_| | (_| | | (_| |  __/ | (_| (_) | | | | | | |_) | | | (_| \__ \
    |___/\___/|_|_|\___|_|\__|\__,_|\__,_|  \__,_|\___|  \___\___/|_| |_| |_| .__/|_|  \__,_|___/
                                                                            | |                  
                                                                            |_|   

    -->

        <record id="group_purchase_user" model="res.groups">
        <field name="name">Usuario solicitud de compras</field>
        <field name="category_id" ref="base.module_category_purchase_management"/>
        <!-- <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/> -->
    </record>

    <record id="rule_grou_purchase_user" model="ir.rule">
        <field name="name">Solicitudes por departamentos</field>
         <field name="model_id" ref="model_purchase_requisition"/>
        <field name="groups" eval="[(4, ref('group_purchase_user')),(4, ref('group_receptionist_pro')),(4, ref('group_receptionist_con_ser'))]"/>
        <field name="domain_force">[('empl_department_id','child_of',user.get_employee_depatment()),'|',('user_id', '=', user.id), ('state', '!=', 'draft')]</field>
    </record>


    <record id="group_purchase_user_manufacturing" model="res.groups">
        <field name="name">Usuario solicitud de compras fabricación</field>
        <field name="category_id" ref="base.module_category_purchase_management"/>
        <!-- <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/> -->
    </record>

    <record id="rule_grou_purchase_user_manufacturing" model="ir.rule">
        <field name="name">Solicitudes por departamentos</field>
         <field name="model_id" ref="model_purchase_requisition"/>
        <field name="groups" eval="[(4, ref('group_purchase_user_manufacturing'))]"/>
        <field name="domain_force">[('empl_department_id','child_of',user.get_employee_depatment()),'|',('user_id', '=', user.id), ('state', '!=', 'draft')]</field>
    </record>


    <!--
    ______                   _                     _        _                            _             _             
    | ___ \                 (_)                   | |      (_)                          | |           (_)            
    | |_/ /__ _ __ _ __ ___  _ ___  ___  ___    __| | ___   _ _ __ ___  _ __   ___  _ __| |_ __ _  ___ _  _/_  _ __  
    |  __/ _ \ '__| '_ ` _ \| / __|/ _ \/ __|  / _` |/ _ \ | | '_ ` _ \| '_ \ / _ \| '__| __/ _` |/ __| |/ _ \| '_ \ 
    | | |  __/ |  | | | | | | \__ \ (_) \__ \ | (_| |  __/ | | | | | | | |_) | (_) | |  | || (_| | (__| | (_) | | | |
    \_|  \___|_|  |_| |_| |_|_|___/\___/|___/  \__,_|\___| |_|_| |_| |_| .__/ \___/|_|   \__\__,_|\___|_|\___/|_| |_|
                                                                       | |                                           
                                                                       |_|                                           
    -->

    <record id="group_import_licenses" model="res.groups">
        <field name="name">Permisos de importación</field>
        <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/>
        <field name="category_id" ref="base.module_category_purchase_management"/>
    </record>


    <!--
      ___             _ _ _            _                                                 
     / _ \           (_) (_)          | |                                                
    / /_\ \_   ___  ___| |_ _ __    __| | ___    ___ ___  _ __ ___  _ __  _ __ __ _ _ __ 
    |  _  | | | \ \/ / | | | '__|  / _` |/ _ \  / __/ _ \| '_ ` _ \| '_ \| '__/ _` | '__|
    | | | | |_| |>  <| | | | |    | (_| |  __/ | (_| (_) | | | | | | |_) | | | (_| | |   
    \_| |_/\__,_/_/\_\_|_|_|_|     \__,_|\___|  \___\___/|_| |_| |_| .__/|_|  \__,_|_|   
                                                                   | |                   
                                                                   |_|               
    -->

    <record id="group_assistant" model="res.groups">
        <field name="name">Auxiliar de compras</field>
        <field name="category_id" ref="base.module_category_purchase_management"/>
        <field name="menu_access" eval="[(4, ref('purchase.menu_purchase_form_action')),
        (4, ref('purchase.menu_purchase_rfq')),
        (4, ref('account.menu_action_invoice_tree2')),
        (4, ref('purchase_reception_menu')),
        (4, ref('purchase.menu_procurement_partner_contact_form'))]"/>
<!--         <field name="menu_access" eval="[(4, ref('base.menu_procurement_management_supplier_name'))]"/>
        <field name="menu_access" eval="[(4, ref('purchase.menu_purchase_rfq'))]"/>
        <field name="menu_access" eval="[(4, ref('purchase.menu_procurement_management_product'))]"/>
        <field name="menu_access" eval="[(4, ref('purchase.menu_procurement_partner_contact_form'))]"/> -->
    </record>

        <record id="recruitment_request_base_user_rule" model="ir.rule">
            <field name="name">Solicitudes asignadas</field>
            <field ref="model_purchase_requisition" name="model_id"/>
            <field name="domain_force">['|',('employee_assigned.user_id','=',user.id),('user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('purchases_gi.group_assistant'))]"/>
        </record>

    <!--
    <record id="rule_group_assistant_order" model="ir.rule">
        <field name="name">Ordenes asignadas</field>
         <field name="model_id" ref="model_purchase_order"/>
        <field name="groups" eval="[(4, ref('group_assistant'))]"/>
        <field name="domain_force">[('employee_assig.user_id','=',user.id)]</field>
    </record> -->

    <record model="ir.rule" id="reception_comp_rule">
        <field name="name">Reception: multi-company</field>
        <field name="model_id" ref="purchases_gi.model_purchase_reception"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[
                                        ('company_id', '=', user.company_id.id)
                                    ]</field>
    </record>

        <!--  Solo consulta -->
    <record id="res_groups_105" model="res.groups">
        <field name="name">Solo consulta</field>
        <field name="implied_ids" eval="[(4, ref('purchase.group_purchase_user'))]"/>
        <field name="menu_access" eval="[(4, ref('account.menu_action_invoice_tree2')),
        (4, ref('purchase_reception_menu'))]"/>
    </record>

    <record id="rule_group_director" model="ir.rule">
        <field name="name">Solicitud de cotizacion para director</field>
         <field name="model_id" ref="model_purchase_requisition"/>
        <field name="groups" eval="[(4, ref('__export__.res_groups_105'))]"/>
        <field name="domain_force">['|',('employee_approve.user_id', '=', user.id),('employee_authorize.user_id', '=', user.id)]</field>
    </record>


    </data>
</openerp>